import streamlit as st
import pandas as pd

# ---------------------------------------------------------
# 1. è¨­å®š & å®šæ•° (å¤‰æ›´ã—ã‚„ã™ã„ã‚ˆã†ã«ã“ã“ã«ã¾ã¨ã‚ã‚‹)
# ---------------------------------------------------------
PAGE_TITLE = "æŠ•ç¥¨ã‚¢ãƒ—ãƒª Home"
APP_HEADER = "ğŸ—³ï¸ æŠ•ç¥¨ã‚¢ãƒ—ãƒªã¸ã‚ˆã†ã“ãï¼"
APP_DESCRIPTION = "ãƒãƒ¼ãƒ ã®æ„è¦‹ã‚’ä¸€ã¤ã«ã€‚æ–°ã—ã„è­°é¡Œã‚’ä½œã£ãŸã‚Šã€æŠ•ç¥¨ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚"

# çµ±è¨ˆæƒ…å ±ã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ (å¾Œã§GitHubã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã™ã‚‹é–¢æ•°ã«ç½®ãæ›ãˆã¾ã™)
def get_stats():
    # æœ¬æ¥ã¯ã“ã“ã§ pd.read_csv('github_url...') ç­‰ã‚’è¡Œã†
    return {
        "participants": 777,
        "votes": 777
    }

# ---------------------------------------------------------
# 2. ãƒšãƒ¼ã‚¸è¨­å®š
# ---------------------------------------------------------
st.set_page_config(
    page_title=PAGE_TITLE,
    page_icon="ğŸ—³ï¸",
    layout="centered" # ã‚¹ãƒãƒ›ã§ã‚‚è¦‹ã‚„ã™ã„ã‚ˆã†ä¸­å¤®å¯„ã›
)

# ---------------------------------------------------------
# 3. ã‚«ã‚¹ã‚¿ãƒ CSS (è¦‹ãŸç›®ã®å¾®èª¿æ•´)
# ---------------------------------------------------------
st.markdown("""
    <style>
    /* å…¨ä½“ã®ä½™ç™½èª¿æ•´ */
    .block-container {
        padding-top: 2rem;
        padding-bottom: 2rem;
    }
    /* çµ±è¨ˆæƒ…å ±ã®æ–‡å­—ã‚¹ã‚¿ã‚¤ãƒ« */
    .stat-text {
        font-size: 0.9rem;
        color: #666;
        text-align: center;
        margin-top: 10px;
    }
    </style>
    """, unsafe_allow_html=True)

# ---------------------------------------------------------
# 4. ãƒ¡ã‚¤ãƒ³UIæ§‹ç¯‰
# ---------------------------------------------------------
def main():
    stats = get_stats()

    # å¤–æ ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆï¼ˆã‚¯ã‚ªãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ã®ãŸã‚ã®æ ç·šï¼‰
    with st.container(border=True):
        
        # --- ãƒ˜ãƒƒãƒ€ãƒ¼ ---
        st.title(APP_HEADER)
        st.markdown(APP_DESCRIPTION)
        st.divider() # åŒºåˆ‡ã‚Šç·š

        # --- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ---
        # st.page_link ã¯å¾“æ¥ã®ãƒœã‚¿ãƒ³ã‚ˆã‚Šãƒ¢ãƒ€ãƒ³ã§ã€ãƒšãƒ¼ã‚¸é·ç§»ã«ç‰¹åŒ–ã—ã¦ã„ã¾ã™
        # â€» pagesãƒ•ã‚©ãƒ«ãƒ€ã«å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãŸã‚ã€
        #    ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ disabled=True ã«ã™ã‚‹å‡¦ç†ã‚’å…¥ã‚Œã‚‹ã®ãŒè¦ªåˆ‡ã§ã™ã€‚
        
        st.subheader("ãƒ¡ãƒ‹ãƒ¥ãƒ¼")
        
        col1, col2, col3 = st.columns([1, 4, 1]) # ä¸­å¤®å¯„ã›ã®ãŸã‚ã®ã‚«ãƒ©ãƒ èª¿æ•´
        with col2:
            st.page_link("pages/1_è­°é¡Œä¸€è¦§.py", label="è­°é¡Œä¸€è¦§ã‚’è¦‹ã‚‹", icon="ğŸ“‹", help="ç¾åœ¨é€²è¡Œä¸­ã®æŠ•ç¥¨ã«å‚åŠ ã—ã¾ã™")
            st.page_link("pages/2_æ–°è¦ä½œæˆ.py", label="æ–°ã—ã„è­°é¡Œã‚’ä½œæˆã™ã‚‹", icon="âœ¨", help="æ–°ã—ã„æŠ•ç¥¨ãƒˆãƒ”ãƒƒã‚¯ã‚’ç«‹ã¡ä¸Šã’ã¾ã™")
            st.page_link("pages/3_æŠ•ç¥¨çµæœ.py", label="æŠ•ç¥¨çµæœã‚’è¦‹ã‚‹ (æœ€æ–°)", icon="ğŸ“Š", help="é›†è¨ˆçµæœã‚’ç¢ºèªã—ã¾ã™")

        st.divider() # åŒºåˆ‡ã‚Šç·š

        # --- ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆçµ±è¨ˆæƒ…å ±ï¼‰ ---
        # ã‚«ãƒ©ãƒ ã‚’ä½¿ã£ã¦ä¸­å¤®ã«é…ç½®ã—ã€è¦‹æ „ãˆè‰¯ãã™ã‚‹
        f_col1, f_col2, f_col3 = st.columns([1, 2, 1])
        with f_col2:
            st.markdown(
                f"""
                <div class='stat-text'>
                ğŸ‘¥ å‚åŠ è€…æ•°: <b>{stats['participants']}</b> äºº / ğŸ—³ï¸ æŠ•ç¥¨æ•°: <b>{stats['votes']}</b> ç¥¨
                </div>
                """,
                unsafe_allow_html=True
            )

if __name__ == "__main__":
    main()